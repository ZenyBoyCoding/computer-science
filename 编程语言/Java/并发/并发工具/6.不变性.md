#### 什么是不变性（ Immutable）

​		如果对象在被创建后，状态就不能被修改，那么它就是不可变的, 例子: person对象，age和name都不能再变

```java
public class Person {
     final int age = 18;
     final String name = "Alice";
}
```

#### `final`的作用

1. 类防止被继承、方法防止被重写、变量防止被修改
2. 天生是线程安全的，而不需要额外的同步开销

#### 3种用法:修饰变量、方法、类

**`final`修饰变量**: 被 final修饰的变量，意味着值不能被修改。如果变量是对象，那么对象的引用不能变，但是对象自身的内容依然可以变化。

**`final`修饰:3种变量**

赋值时机: 属性被声明为`final`后，该变量则只能被赋值一次。且一旦被赋值，`final`的变量就不能再被改变，无论如何也不会变	

​	1)`final instance variable`（类中的`final`属性)

​			1. 在声明变量的等号右边直接赋值

​			2. 构造函数中赋值

​			3. 在类的初始代码块中赋值（不常用） 

​			4. 如果不采用第一种赋值方法，那么就必须在第2、3种挑一个来赋值，而不能不赋值，这是`final`语法所规定的

​	2)`final static variable`（类中的 `static final`属性）

​			1.在声明变量的等号右边直接赋值

​			2.用 `static`初始代码块赋值，但是不能用普通的初始代码块赋值

​	3)`final local variable`（方法中的`final`变量）

​			1.在声明变量的等号右边直接赋值

​			2.声明不赋值，使用前赋值



**`final`修饰方法**

- ​	构造方法不允许 final修饰
- ​    不可被重写，也就是不能被 `override`，即便是子类有同样名字的方法，那也不是 `override`，这个和 `static`方法是一个道理
- ​    扩展: `static`方法也不能被重写



**`final`修饰类**

​	不可被继承, 例如典型的 `String`类就是`final`的，我们从没见过哪个类是继承`String`类的



#### 注意点

- `final`修饰对象的时候，只是对象的引用不可变，而对象本身的属性是可以变化的
- `final`使用原则:良好的编程习惯，如果明确是不变，声明成`final`



#### 不变性和`final`的关系

◆不变性并不意味着，简单地用final修饰就是不可变

◆对于基本数据类型，确实被 `final`修饰后就具有不变性

◆但是对于对象类型，需要该对象保证自身被创建后，状态永远不会变才可以

